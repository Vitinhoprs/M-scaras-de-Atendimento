<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FormulÃ¡rio & Lojas FÃ­sicas</title>
  <script src="https://unpkg.com/imask"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding:20px; color:#333; }
    label { display:block; margin:0.5rem 0 0.2rem; }
    input, select, textarea, button { font-size:1rem; padding:0.5rem; width:100%; box-sizing:border-box; }
    textarea { resize:vertical; }
    .field { margin-bottom:1rem; }
    .controls { margin-bottom:1.5rem; }
    button { display:inline-block; padding:0.5rem 1rem; background:#333; color:#fff; border:none; border-radius:4px; cursor:pointer; transition:background .3s; margin-right:.5rem; }
    button:hover { background:#555; }
    #botao-area { margin-bottom:1rem; }
    #toast { position:fixed; top:20px; right:20px; background:#333; color:#fff; padding:10px; border-radius:5px; opacity:0; display:none; transition:opacity .5s; }
    /* Lojas FÃ­sicas */
    #lojas-fisicas ul { list-style:none; padding:0; }
    #lojas-fisicas li { margin:1rem 0; }
    #lojas-fisicas h3 { margin:0 0 .3rem; font-size:1.1rem; }
    #lojas-fisicas .pin { margin-right:.5rem; vertical-align:middle; }
  </style>
</head>
<body>
  <h1>FormulÃ¡rio de SAC, Suporte, RetenÃ§Ã£o, TransferÃªncias & Lojas FÃ­sicas</h1>

  <div class="controls">
    <label for="categoria">Categoria</label>
    <select id="categoria"><option value="">â€” selecione â€”</option></select>
  </div>
  <div class="controls">
    <label for="template">Template</label>
    <select id="template" disabled><option value="">â€” selecione â€”</option></select>
  </div>
  <form id="form-campos"></form>
  <div id="botao-area">
    <button id="btnCopy" disabled>Copiar</button>
    <button id="btnClear" disabled>Limpar</button>
  </div>
  <div id="toast">Copiado!</div>

  <script>
    const lojasHTML = `
      <section id="lojas-fisicas">
        <h2>Lojas fÃ­sicas (Ligga)</h2>
        <ul>
          <li><h3>Campo Largo | PR</h3><p>ğŸ“ Av. Ver. Arlindo Chemim, 95<br>CEP: 83601-180</p></li>
          <li><h3>Bandeirantes | PR</h3><p>ğŸ“ Av. Comendador Luiz Meneghel, 558<br>CEP: 86360-000</p></li>
          <li><h3>Fazenda Rio Grande | PR</h3><p>ğŸ“ R. Castanheira, 528<br>CEP: 83820-056</p></li>
          <li><h3>Foz do IguaÃ§u | PR</h3><p>ğŸ“ R. Mal. Floriano Peixoto, 936<br>CEP: 85851-020</p></li>
          <li><h3>Jacarezinho | PR</h3><p>ğŸ“ R. ParanÃ¡, 508<br>CEP: 86400-000</p></li>
          <li><h3>Matinhos | PR</h3><p>ğŸ“ R. da Fonte, 414<br>CEP: 83260-000</p></li>
          <li><h3>Medianeira | PR</h3><p>ğŸ“ R. ParanÃ¡, 2384<br>CEP: 85884-000</p></li>
          <li><h3>Santo AntÃ´nio da Platina | PR</h3><p>ğŸ“ R. Tiradentes, 603<br>CEP: 86430-000</p></li>
          <li><h3>Sinop | MT</h3><p>ğŸ“ Av. dos TarumÃ£s, 1366<br>CEP: 78550-043</p></li>
          <li><h3>Nova Mutum | MT</h3><p>ğŸ“ Av. das Araras, 1144<br>CEP: 78450-000</p></li>
          <li><h3>SÃ£o JosÃ© dos Pinhais | PR</h3><p>ğŸ“ R. Joaquim Nabuco, 2483<br>CEP: 83005-160</p></li>
          <li><h3>ParanaguÃ¡ | PR</h3><p>ğŸ“ Travessa Correia de Freitas, 161<br>CEP: 83203-260</p></li>
          <li><h3>Ponta Grossa | PR</h3><p>ğŸ“ R. Cel. DulcÃ­dio, 618<br>CEP: 84010-280</p></li>
        </ul>
      </section>`;

    const config = {
      "SAC": {
        "1. Segunda via do boleto â€” Boleto encaminhado": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Cliente solicitou boleto com vencimento dia XX, enviado por e-mail."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente questionou valores; orientado sobre detalhamento."}
        ],
        "1. Segunda via do boleto â€” Boleto desatualizado": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Cliente nÃ£o consegue pagar boleto vencido; atualizado novo vencimento: ___."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "Erro no envio": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Sistema indisponÃ­vel; orientado gerar boleto pelo site/app."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "2. Baixa no pagamento â€” Dentro do prazo": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Baixa de pagamento pode levar atÃ© 48h Ãºteis."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "2. Baixa no pagamento â€” NecessÃ¡rio comprovante": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Baixa nÃ£o registrada apÃ³s 48h; solicitado comprovante em PDF."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "3. MudanÃ§a de plano â€” DisponÃ­vel": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"AlteraÃ§Ã£o de plano realizada para ___ (fidelizaÃ§Ã£o 12 meses)."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "3. MudanÃ§a de plano â€” NÃ£o disponÃ­vel": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"AlteraÃ§Ã£o nÃ£o disponÃ­vel por boletos em aberto; orientado regularizar pendÃªncias."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "4. MudanÃ§a de endereÃ§o": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"cpf",           label:"CPF", mask:"000.000.000-00"},
          {id:"dateOfBirth",   label:"Data de nascimento", mask:"00/00/0000"},
          {id:"contactPhone",  label:"Telefone de contato", mask:"(00) 00000-0000"},
          {id:"email",         label:"E-mail"},
          {id:"motherName",    label:"Nome da mÃ£e"},
          {id:"plan",          label:"Plano"},
          {id:"oldAddress",    label:"EndereÃ§o antigo"},
          {id:"newAddress",    label:"EndereÃ§o novo"},
          {id:"referencePoint",label:"Ponto de referÃªncia"},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "5. MudanÃ§a de ponto": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"contactPhone",  label:"Telefone de contato",mask:"(00) 00000-0000"},
          {id:"cpf",           label:"CPF",mask:"000.000.000-00"},
          {id:"plan",          label:"Plano"},
          {id:"planValue",     label:"Valor do plano (R$)",mask:"#.##0,00",lazy:false},
          {id:"feeValue",      label:"Valor da taxa (R$)",mask:"#.##0,00",lazy:false},
          {id:"oldAddress",    label:"EndereÃ§o antigo"},
          {id:"newAddress",    label:"EndereÃ§o novo"},
          {id:"referencePoint",label:"Ponto de referÃªncia"},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "6. ReativaÃ§Ã£o â€” NecessÃ¡rio aguardar": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Cliente negocia dÃ©bitos; baixa em atÃ© 48h."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "6. ReativaÃ§Ã£o â€” Feita": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"PPPoE habilitado; conexÃ£o normalizada."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "7. Ajuste anual de valores": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Reajuste anual ANATEL apÃ³s 12 meses."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "8. Plano suspenso / Velocidade reduzida": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"SuspensÃ£o/reduÃ§Ã£o por boleto em aberto."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "9. NegociaÃ§Ã£o": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"NegociaÃ§Ã£o realizada; boleto enviado."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "9. RenegociaÃ§Ã£o": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"RenegociaÃ§Ã£o realizada."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "10. HabilitaÃ§Ã£o provisÃ³ria â€” DisponÃ­vel": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"HabilitaÃ§Ã£o provisÃ³ria 4 dias corridos."},
          {id:"attention",     type:"textarea",label:"AtenÃ§Ã£o (prazos)",default:"â€¢ 06 dias: cobranÃ§a;\nâ€¢ 16 dias: reduÃ§Ã£o;\nâ€¢ 46 dias: suspensÃ£o;\nâ€¢ 120 dias: cancelamento."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "10. HabilitaÃ§Ã£o provisÃ³ria â€” NÃ£o disponÃ­vel": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"NÃ£o disponÃ­vel no perÃ­odo recente."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "11. AÃ§Ã£o freezing â€” EmissÃ£o de 2Âª via boleto": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Boleto enviado a partir de (--)."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "11. AÃ§Ã£o freezing â€” NegociaÃ§Ã£o": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"NegociaÃ§Ã£o agendada (--)."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ]
      },
      "Suporte": {
        "1. Massiva na regiÃ£o": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Falta de conexÃ£o em massa; manutenÃ§Ã£o confirmada."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "2. VinculaÃ§Ã£o sem sucesso/LOS Vermelha": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"clientCode",    label:"CÃ³d. do Cliente"},
          {id:"nvfCode",       label:"CÃ³d. NVF"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"procedureDetails",type:"textarea",label:"Procedimento Realizado",default:"LOS vermelha; testes sem normalizaÃ§Ã£o."},  
          {id:"clientStatus",  type:"radio",label:"Status do cliente",options:["Conectado","Desconectado"]},
          {id:"address",       label:"EndereÃ§o completo"},
          {id:"referencePoint",label:"Ponto de referÃªncia"},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "3. VinculaÃ§Ã£o com sucesso": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"ConexÃ£o normalizada apÃ³s testes."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "4. LentidÃ£o": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Cliente relata lentidÃ£o; vinculaÃ§Ã£o sem sucesso."},
          {id:"clientStatus",  type:"radio",label:"Status do cliente",options:["Conectado","Desconectado"]},
          {id:"failureNote",   type:"textarea",label:"Motivo do insucesso",default:"VinculaÃ§Ã£o nÃ£o realizada."},
          {id:"clientCode",    label:"CÃ³d. do Cliente"},
          {id:"nvfCode",       label:"CÃ³d. NVF"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"address",       label:"EndereÃ§o completo"},
          {id:"referencePoint",label:"Ponto de referÃªncia"},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "5. Troca de equipamento": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"address",       label:"EndereÃ§o"},
          {id:"referencePoint",label:"Ponto de referÃªncia"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Solicitada troca de equipamento."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "6. Troca de senha Wi-fi": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"clientCode",    label:"CÃ³digo do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Solicitada troca de senha Wi-fi."},
          {id:"newPassword",   label:"Nova senha desejada"},
          {id:"importantInfo", type:"textarea",label:"Importante",default:"Senha mÃ­nimo 8 caracteres; sem especiais ou acentos."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "7. InformaÃ§Ã£o visita tÃ©cnica â€” Dentro do prazo": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Visita tÃ©cnica agendada; perÃ­odo 08â€“18h."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"note",          type:"textarea",label:"ObservaÃ§Ã£o",default:"Atendimento 08:00â€“18:00."},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],
        "7. InformaÃ§Ã£o visita tÃ©cnica â€” TÃ©cnico nÃ£o compareceu": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"TÃ©cnico nÃ£o compareceu; reagendado para __."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"note",          type:"textarea",label:"ObservaÃ§Ã£o",default:"Reassumir chamado e encaminhar ao polo."},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],  
        "7. InformaÃ§Ã£o visita tÃ©cnica â€” NAP/Equipe de rede": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Encaminhado para equipe de rede; prazo 48h."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ],  
        "8. MÃ¡scara de massiva": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Enviar no WhatsApp: Base, Cidade, Bairro, Cliente, Tipo de falha."},
          {id:"additional",    type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre serviÃ§os."}
        ]
      },
      "RetenÃ§Ã£o": {
        "InstruÃ§Ãµes de RetenÃ§Ã£o": [
          {id:"importantInfo",type:"textarea",label:"Importante",default:"1. Para planos corporativos, nÃ£o cancele; encaminhar para pos-vendas@liggavc.com.br\n2. Solicitar nome da mÃ£e, nÂº do contrato e data de nascimento.\n3. Confirmar dado adicional (2 opÃ§Ãµes). Se incorreto, orientar reenvio."}
        ],
        "1. Visita TÃ©cnica nÃ£o realizada â€” Retido": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"CÃ³digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"InsatisfaÃ§Ã£o",default:"Cliente solicita cancelamento devido Ã  ausÃªncia do tÃ©cnico."},
          {id:"solution",       type:"textarea",label:"SoluÃ§Ã£o/oferta aplicada",default:"Oferecida nova visita tÃ©cnica, reagendada para ___. Cliente retido."},
          {id:"additional",     type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre multa contratual em caso de cancelamento."}
        ],
        "1. Visita TÃ©cnica nÃ£o realizada â€” Cancelado": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"CÃ³digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"InsatisfaÃ§Ã£o",default:"Cliente cancelou apÃ³s ausÃªncia do tÃ©cnico."},
          {id:"solution",       type:"textarea",label:"SoluÃ§Ã£o/oferta aplicada",default:"Cliente nÃ£o aceitou reagendamento. Contrato cancelado e retirada agendada."},
          {id:"additional",     type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre detalhamento dos serviÃ§os."}
        ],
        "2. Motivos Financeiros â€” Retido": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"CÃ³digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"InsatisfaÃ§Ã£o",default:"Cliente alega valor acima de suas condiÃ§Ãµes financeiras."},
          {id:"solution",       type:"textarea",label:"SoluÃ§Ã£o/oferta aplicada",default:"Ofertado desconto de [percentual]%, novo valor R$ [novo valor]. Cliente retido."},
          {id:"additional",     type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre multa contratual."}
        ],
        "2. Motivos Financeiros â€” Cancelado": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"CÃ³digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"InsatisfaÃ§Ã£o",default:"Cliente alega condiÃ§Ãµes financeiras."},
          {id:"solution",       type:"textarea",label:"SoluÃ§Ã£o/oferta aplicada",default:"Ofertado desconto; nÃ£o aceito. Contrato cancelado."},
          {id:"additional",     type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre detalhamento dos serviÃ§os."}
        ],
        "3. ConcorrÃªncia â€” Retido": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"CÃ³digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"InsatisfaÃ§Ã£o",default:"Cliente alega oferta mais vantajosa da concorrÃªncia."},
          {id:"competitor",     type:"textarea",label:"ConcorrÃªncia â€“ Empresa e PreÃ§o",default:"Empresa X\nPreÃ§o: R$ ___"},
          {id:"solution",       type:"textarea",label:"SoluÃ§Ã£o/oferta aplicada",default:"Ofertado desconto, novo valor R$ [novo valor]. Cliente retido."},
          {id:"additional",     type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre multa contratual."}
        ],
        "3. ConcorrÃªncia â€” Cancelado": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"CÃ³digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"InsatisfaÃ§Ã£o",default:"Cliente alega oferta mais vantajosa da concorrÃªncia."},
          {id:"competitor",     type:"textarea",label:"ConcorrÃªncia â€“ Empresa e PreÃ§o",default:"Empresa X\nPreÃ§o: R$ ___"},
          {id:"solution",       type:"textarea",label:"SoluÃ§Ã£o/oferta aplicada",default:"Ofertado desconto; nÃ£o aceito. Contrato cancelado."},
          {id:"additional",     type:"textarea",label:"AlÃ©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre detalhamento dos serviÃ§os."}
        ]
      },
      "TransferÃªncias": {
        "1. RetenÃ§Ã£o â€” SolicitaÃ§Ã£o de cancelamento": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Cliente solicita cancelamento do plano. Motivo: ___. Transferido para setor responsÃ¡vel."}
        ],
        "1. RetenÃ§Ã£o â€” Inviabilidade de fibra": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Cliente solicita mudanÃ§a de endereÃ§o; sem viabilidade de fibra. Transferido para setor responsÃ¡vel."}
        ],
        "2. SupervisÃ£o": [
          {id:"protocolNumber",label:"NÂº do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"DescriÃ§Ã£o",default:"Cliente pede para falar com supervisÃ£o. Motivo: ___. Transferido para ramal do supervisor."}
        ]
      },
      "Lojas fÃ­sicas": {
        "Lojas fÃ­sicas (Ligga)": [
          {id:"staticLojas",type:"static",label:""}
        ]
      }
    };

    const selCat   = document.getElementById("categoria"),
          selTpl   = document.getElementById("template"),
          form     = document.getElementById("form-campos"),
          btnArea  = document.getElementById("botao-area"),
          btnCopy  = document.getElementById("btnCopy"),
          btnClear = document.getElementById("btnClear");
    let imasks = [];

    Object.keys(config).forEach(cat=>{
      const o = document.createElement("option");
      o.value = cat; o.textContent = cat;
      selCat.append(o);
    });

    selCat.onchange = ()=>{
      selTpl.innerHTML = '<option value="">â€” selecione â€”</option>';
      selTpl.disabled = !selCat.value;
      form.innerHTML = '';
      imasks.forEach(m=>m.destroy());
      imasks = [];
      btnArea.style.display = 'none';
      if(selCat.value){
        Object.keys(config[selCat.value]).forEach(tpl=>{
          const o = document.createElement("option");
          o.value = tpl; o.textContent = tpl;
          selTpl.append(o);
        });
      }
    };

    selTpl.onchange = ()=>{
      form.innerHTML = '';
      imasks.forEach(m=>m.destroy());
      imasks = [];
      const campos = config[selCat.value][selTpl.value] || [];
      if(campos[0] && campos[0].type === 'static'){
        form.innerHTML = lojasHTML;
        btnArea.style.display = 'none';
        return;
      }
      campos.forEach(c=>{
        const wrap = document.createElement("div");
        wrap.className = 'field';
        const lb = document.createElement("label");
        lb.htmlFor = c.id; lb.textContent = c.label;
        wrap.append(lb);
        let inp;
        if(c.type === 'textarea'){
          inp = document.createElement("textarea");
          inp.rows = 3;
          if(c.default) inp.value = c.default;
        } else if(c.type === 'radio'){
          c.options.forEach(opt=>{
            const rb = document.createElement("input");
            rb.type = 'radio'; rb.name = c.id; rb.value = opt; rb.id = c.id + opt;
            const lbl = document.createElement("label");
            lbl.htmlFor = rb.id; lbl.textContent = opt;
            wrap.append(rb, lbl);
          });
        } else {
          inp = document.createElement("input");
          inp.type = 'text';
          if(c.default) inp.value = c.default;
        }
        if(inp){
          inp.id = c.id;
          wrap.append(inp);
          if(c.mask) imasks.push(IMask(inp,{mask:c.mask,lazy:c.lazy!==false}));
        }
        form.append(wrap);
      });
      btnArea.style.display = 'block';
      btnCopy.disabled = btnClear.disabled = false;
    };

    btnCopy.onclick = ()=>{
      const vals = (config[selCat.value][selTpl.value]||[]).map(c=>{
        if(c.type==='radio'){
          const s = document.querySelector(`input[name="${c.id}"]:checked`);
          return s? s.value : '';
        }
        const e = document.getElementById(c.id);
        return e? e.value.trim() : '';
      }).join('\t');
      navigator.clipboard.writeText(vals).then(()=>{
        const t = document.getElementById("toast");
        t.style.display = 'block';
        t.style.opacity = 1;
        setTimeout(()=>{
          t.style.opacity = 0;
          setTimeout(()=>t.style.display='none',500);
        },1500);
      });
    };
    btnClear.onclick = ()=> selTpl.onchange();
  </script>
</body>
</html>
