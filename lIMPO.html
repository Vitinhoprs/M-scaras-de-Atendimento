<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Formul√°rio & Lojas F√≠sicas</title>
  <script src="https://unpkg.com/imask"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding:20px; color:#333; }
    label { display:block; margin:0.5rem 0 0.2rem; }
    input, select, textarea, button { font-size:1rem; padding:0.5rem; width:100%; box-sizing:border-box; }
    textarea { resize:vertical; }
    .field { margin-bottom:1rem; }
    .controls { margin-bottom:1.5rem; }
    button { display:inline-block; padding:0.5rem 1rem; background:#333; color:#fff; border:none; border-radius:4px; cursor:pointer; transition:background .3s; margin-right:.5rem; }
    button:hover { background:#555; }
    #botao-area { margin-bottom:1rem; }
    #toast { position:fixed; top:20px; right:20px; background:#333; color:#fff; padding:10px; border-radius:5px; opacity:0; display:none; transition:opacity .5s; }
    /* Lojas F√≠sicas */
    #lojas-fisicas ul { list-style:none; padding:0; }
    #lojas-fisicas li { margin:1rem 0; }
    #lojas-fisicas h3 { margin:0 0 .3rem; font-size:1.1rem; }
    #lojas-fisicas .pin { margin-right:.5rem; vertical-align:middle; }
  </style>
</head>
<body>
  <h1>Formul√°rio de SAC, Suporte, Reten√ß√£o, Transfer√™ncias & Lojas F√≠sicas</h1>

  <div class="controls">
    <label for="categoria">Categoria</label>
    <select id="categoria"><option value="">‚Äî selecione ‚Äî</option></select>
  </div>
  <div class="controls">
    <label for="template">Template</label>
    <select id="template" disabled><option value="">‚Äî selecione ‚Äî</option></select>
  </div>
  <form id="form-campos"></form>
  <div id="botao-area">
    <button id="btnCopy" disabled>Copiar</button>
    <button id="btnClear" disabled>Limpar</button>
  </div>
  <div id="toast">Copiado!</div>

  <script>
    const lojasHTML = `
      <section id="lojas-fisicas">
        <h2>Lojas f√≠sicas (Ligga)</h2>
        <ul>
          <li><h3>Campo Largo | PR</h3><p>üìç Av. Ver. Arlindo Chemim, 95<br>CEP: 83601-180</p></li>
          <li><h3>Bandeirantes | PR</h3><p>üìç Av. Comendador Luiz Meneghel, 558<br>CEP: 86360-000</p></li>
          <li><h3>Fazenda Rio Grande | PR</h3><p>üìç R. Castanheira, 528<br>CEP: 83820-056</p></li>
          <li><h3>Foz do Igua√ßu | PR</h3><p>üìç R. Mal. Floriano Peixoto, 936<br>CEP: 85851-020</p></li>
          <li><h3>Jacarezinho | PR</h3><p>üìç R. Paran√°, 508<br>CEP: 86400-000</p></li>
          <li><h3>Matinhos | PR</h3><p>üìç R. da Fonte, 414<br>CEP: 83260-000</p></li>
          <li><h3>Medianeira | PR</h3><p>üìç R. Paran√°, 2384<br>CEP: 85884-000</p></li>
          <li><h3>Santo Ant√¥nio da Platina | PR</h3><p>üìç R. Tiradentes, 603<br>CEP: 86430-000</p></li>
          <li><h3>Sinop | MT</h3><p>üìç Av. dos Tarum√£s, 1366<br>CEP: 78550-043</p></li>
          <li><h3>Nova Mutum | MT</h3><p>üìç Av. das Araras, 1144<br>CEP: 78450-000</p></li>
          <li><h3>S√£o Jos√© dos Pinhais | PR</h3><p>üìç R. Joaquim Nabuco, 2483<br>CEP: 83005-160</p></li>
          <li><h3>Paranagu√° | PR</h3><p>üìç Travessa Correia de Freitas, 161<br>CEP: 83203-260</p></li>
          <li><h3>Ponta Grossa | PR</h3><p>üìç R. Cel. Dulc√≠dio, 618<br>CEP: 84010-280</p></li>
        </ul>
      </section>`;

    const config = {
      "SAC": {
        "1. Segunda via do boleto ‚Äî Boleto encaminhado": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Cliente solicitou boleto com vencimento dia XX, enviado por e-mail."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente questionou valores; orientado sobre detalhamento."}
        ],
        "1. Segunda via do boleto ‚Äî Boleto desatualizado": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Cliente n√£o consegue pagar boleto vencido; atualizado novo vencimento: ___."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "Erro no envio": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Sistema indispon√≠vel; orientado gerar boleto pelo site/app."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "2. Baixa no pagamento ‚Äî Dentro do prazo": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Baixa de pagamento pode levar at√© 48h √∫teis."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "2. Baixa no pagamento ‚Äî Necess√°rio comprovante": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Baixa n√£o registrada ap√≥s 48h; solicitado comprovante em PDF."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "3. Mudan√ßa de plano ‚Äî Dispon√≠vel": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Altera√ß√£o de plano realizada para ___ (fideliza√ß√£o 12 meses)."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "3. Mudan√ßa de plano ‚Äî N√£o dispon√≠vel": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Altera√ß√£o n√£o dispon√≠vel por boletos em aberto; orientado regularizar pend√™ncias."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "4. Mudan√ßa de endere√ßo": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"cpf",           label:"CPF", mask:"000.000.000-00"},
          {id:"dateOfBirth",   label:"Data de nascimento", mask:"00/00/0000"},
          {id:"contactPhone",  label:"Telefone de contato", mask:"(00) 00000-0000"},
          {id:"email",         label:"E-mail"},
          {id:"motherName",    label:"Nome da m√£e"},
          {id:"plan",          label:"Plano"},
          {id:"oldAddress",    label:"Endere√ßo antigo"},
          {id:"newAddress",    label:"Endere√ßo novo"},
          {id:"referencePoint",label:"Ponto de refer√™ncia"},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "5. Mudan√ßa de ponto": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"contactPhone",  label:"Telefone de contato",mask:"(00) 00000-0000"},
          {id:"cpf",           label:"CPF",mask:"000.000.000-00"},
          {id:"plan",          label:"Plano"},
          {id:"planValue",     label:"Valor do plano (R$)",mask:"#.##0,00",lazy:false},
          {id:"feeValue",      label:"Valor da taxa (R$)",mask:"#.##0,00",lazy:false},
          {id:"oldAddress",    label:"Endere√ßo antigo"},
          {id:"newAddress",    label:"Endere√ßo novo"},
          {id:"referencePoint",label:"Ponto de refer√™ncia"},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "6. Reativa√ß√£o ‚Äî Necess√°rio aguardar": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Cliente negocia d√©bitos; baixa em at√© 48h."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "6. Reativa√ß√£o ‚Äî Feita": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"PPPoE habilitado; conex√£o normalizada."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "7. Ajuste anual de valores": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Reajuste anual ANATEL ap√≥s 12 meses."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "8. Plano suspenso / Velocidade reduzida": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Suspens√£o/redu√ß√£o por boleto em aberto."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "9. Negocia√ß√£o": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Negocia√ß√£o realizada; boleto enviado."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "9. Renegocia√ß√£o": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Renegocia√ß√£o realizada."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "10. Habilita√ß√£o provis√≥ria ‚Äî Dispon√≠vel": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Habilita√ß√£o provis√≥ria 4 dias corridos."},
          {id:"attention",     type:"textarea",label:"Aten√ß√£o (prazos)",default:"‚Ä¢ 06 dias: cobran√ßa;\n‚Ä¢ 16 dias: redu√ß√£o;\n‚Ä¢ 46 dias: suspens√£o;\n‚Ä¢ 120 dias: cancelamento."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "10. Habilita√ß√£o provis√≥ria ‚Äî N√£o dispon√≠vel": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"N√£o dispon√≠vel no per√≠odo recente."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "11. A√ß√£o freezing ‚Äî Emiss√£o de 2¬™ via boleto": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Boleto enviado a partir de (--)."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "11. A√ß√£o freezing ‚Äî Negocia√ß√£o": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Negocia√ß√£o agendada (--)."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ]
      },
      "Suporte": {
        "1. Massiva na regi√£o": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Falta de conex√£o em massa; manuten√ß√£o confirmada."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "2. Vincula√ß√£o sem sucesso/LOS Vermelha": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"clientCode",    label:"C√≥d. do Cliente"},
          {id:"nvfCode",       label:"C√≥d. NVF"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"procedureDetails",type:"textarea",label:"Procedimento Realizado",default:"LOS vermelha; testes sem normaliza√ß√£o."},  
          {id:"clientStatus",  type:"radio",label:"Status do cliente",options:["Conectado","Desconectado"]},
          {id:"address",       label:"Endere√ßo completo"},
          {id:"referencePoint",label:"Ponto de refer√™ncia"},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "3. Vincula√ß√£o com sucesso": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Conex√£o normalizada ap√≥s testes."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "4. Lentid√£o": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Cliente relata lentid√£o; vincula√ß√£o sem sucesso."},
          {id:"clientStatus",  type:"radio",label:"Status do cliente",options:["Conectado","Desconectado"]},
          {id:"failureNote",   type:"textarea",label:"Motivo do insucesso",default:"Vincula√ß√£o n√£o realizada."},
          {id:"clientCode",    label:"C√≥d. do Cliente"},
          {id:"nvfCode",       label:"C√≥d. NVF"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"address",       label:"Endere√ßo completo"},
          {id:"referencePoint",label:"Ponto de refer√™ncia"},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "5. Troca de equipamento": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"address",       label:"Endere√ßo"},
          {id:"referencePoint",label:"Ponto de refer√™ncia"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Solicitada troca de equipamento."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "6. Troca de senha Wi-fi": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"whatsappPhone", label:"Telefone WhatsApp",mask:"(00) 00000-0000"},
          {id:"clientCode",    label:"C√≥digo do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Solicitada troca de senha Wi-fi."},
          {id:"newPassword",   label:"Nova senha desejada"},
          {id:"importantInfo", type:"textarea",label:"Importante",default:"Senha m√≠nimo 8 caracteres; sem especiais ou acentos."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "7. Informa√ß√£o visita t√©cnica ‚Äî Dentro do prazo": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Visita t√©cnica agendada; per√≠odo 08‚Äì18h."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"note",          type:"textarea",label:"Observa√ß√£o",default:"Atendimento 08:00‚Äì18:00."},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],
        "7. Informa√ß√£o visita t√©cnica ‚Äî T√©cnico n√£o compareceu": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"T√©cnico n√£o compareceu; reagendado para __."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"note",          type:"textarea",label:"Observa√ß√£o",default:"Reassumir chamado e encaminhar ao polo."},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],  
        "7. Informa√ß√£o visita t√©cnica ‚Äî NAP/Equipe de rede": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Encaminhado para equipe de rede; prazo 48h."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ],  
        "8. M√°scara de massiva": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Enviar no WhatsApp: Base, Cidade, Bairro, Cliente, Tipo de falha."},
          {id:"additional",    type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",       type:"textarea",label:"Exemplo",default:"Cliente orientado sobre servi√ßos."}
        ]
      },
      "Reten√ß√£o": {
        "Instru√ß√µes de Reten√ß√£o": [
          {id:"importantInfo",type:"textarea",label:"Importante",default:"1. Para planos corporativos, n√£o cancele; encaminhar para pos-vendas@liggavc.com.br\n2. Solicitar nome da m√£e, n¬∫ do contrato e data de nascimento.\n3. Confirmar dado adicional (2 op√ß√µes). Se incorreto, orientar reenvio."}
        ],
        "1. Visita T√©cnica n√£o realizada ‚Äî Retido": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"C√≥digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"Insatisfa√ß√£o",default:"Cliente solicita cancelamento devido √† aus√™ncia do t√©cnico."},
          {id:"solution",       type:"textarea",label:"Solu√ß√£o/oferta aplicada",default:"Oferecida nova visita t√©cnica, reagendada para ___. Cliente retido."},
          {id:"additional",     type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre multa contratual em caso de cancelamento."}
        ],
        "1. Visita T√©cnica n√£o realizada ‚Äî Cancelado": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"C√≥digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"Insatisfa√ß√£o",default:"Cliente cancelou ap√≥s aus√™ncia do t√©cnico."},
          {id:"solution",       type:"textarea",label:"Solu√ß√£o/oferta aplicada",default:"Cliente n√£o aceitou reagendamento. Contrato cancelado e retirada agendada."},
          {id:"additional",     type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre detalhamento dos servi√ßos."}
        ],
        "2. Motivos Financeiros ‚Äî Retido": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"C√≥digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"Insatisfa√ß√£o",default:"Cliente alega valor acima de suas condi√ß√µes financeiras."},
          {id:"solution",       type:"textarea",label:"Solu√ß√£o/oferta aplicada",default:"Ofertado desconto de [percentual]%, novo valor R$ [novo valor]. Cliente retido."},
          {id:"additional",     type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre multa contratual."}
        ],
        "2. Motivos Financeiros ‚Äî Cancelado": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"C√≥digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"Insatisfa√ß√£o",default:"Cliente alega condi√ß√µes financeiras."},
          {id:"solution",       type:"textarea",label:"Solu√ß√£o/oferta aplicada",default:"Ofertado desconto; n√£o aceito. Contrato cancelado."},
          {id:"additional",     type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre detalhamento dos servi√ßos."}
        ],
        "3. Concorr√™ncia ‚Äî Retido": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"C√≥digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"Insatisfa√ß√£o",default:"Cliente alega oferta mais vantajosa da concorr√™ncia."},
          {id:"competitor",     type:"textarea",label:"Concorr√™ncia ‚Äì Empresa e Pre√ßo",default:"Empresa X\nPre√ßo: R$ ___"},
          {id:"solution",       type:"textarea",label:"Solu√ß√£o/oferta aplicada",default:"Ofertado desconto, novo valor R$ [novo valor]. Cliente retido."},
          {id:"additional",     type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre multa contratual."}
        ],
        "3. Concorr√™ncia ‚Äî Cancelado": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"ngProtocol",     label:"Protocolo do NG"},
          {id:"clientCode",     label:"C√≥digo do cliente"},
          {id:"cpfCnpj",        label:"CPF/CNPJ"},
          {id:"attendant",      label:"Atendente"},
          {id:"requesterName",  label:"Nome do solicitante"},
          {id:"originPhone",    label:"Telefone origem"},
          {id:"dissatisfaction",type:"textarea",label:"Insatisfa√ß√£o",default:"Cliente alega oferta mais vantajosa da concorr√™ncia."},
          {id:"competitor",     type:"textarea",label:"Concorr√™ncia ‚Äì Empresa e Pre√ßo",default:"Empresa X\nPre√ßo: R$ ___"},
          {id:"solution",       type:"textarea",label:"Solu√ß√£o/oferta aplicada",default:"Ofertado desconto; n√£o aceito. Contrato cancelado."},
          {id:"additional",     type:"textarea",label:"Al√©m disso, ocorreu"},
          {id:"example",        type:"textarea",label:"Exemplo",default:"Orientado sobre detalhamento dos servi√ßos."}
        ]
      },
      "Transfer√™ncias": {
        "1. Reten√ß√£o ‚Äî Solicita√ß√£o de cancelamento": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Cliente solicita cancelamento do plano. Motivo: ___. Transferido para setor respons√°vel."}
        ],
        "1. Reten√ß√£o ‚Äî Inviabilidade de fibra": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Cliente solicita mudan√ßa de endere√ßo; sem viabilidade de fibra. Transferido para setor respons√°vel."}
        ],
        "2. Supervis√£o": [
          {id:"protocolNumber",label:"N¬∫ do protocolo"},
          {id:"clientName",    label:"Nome do cliente"},
          {id:"description",   type:"textarea",label:"Descri√ß√£o",default:"Cliente pede para falar com supervis√£o. Motivo: ___. Transferido para ramal do supervisor."}
        ]
      },
      "Lojas f√≠sicas": {
        "Lojas f√≠sicas (Ligga)": [
          {id:"staticLojas",type:"static",label:""}
        ]
      }
    };

    const selCat   = document.getElementById("categoria"),
          selTpl   = document.getElementById("template"),
          form     = document.getElementById("form-campos"),
          btnArea  = document.getElementById("botao-area"),
          btnCopy  = document.getElementById("btnCopy"),
          btnClear = document.getElementById("btnClear");
    let imasks = [];

    Object.keys(config).forEach(cat=>{
      const o = document.createElement("option");
      o.value = cat; o.textContent = cat;
      selCat.append(o);
    });

    selCat.onchange = ()=>{
      selTpl.innerHTML = '<option value="">‚Äî selecione ‚Äî</option>';
      selTpl.disabled = !selCat.value;
      form.innerHTML = '';
      imasks.forEach(m=>m.destroy());
      imasks = [];
      btnArea.style.display = 'none';
      if(selCat.value){
        Object.keys(config[selCat.value]).forEach(tpl=>{
          const o = document.createElement("option");
          o.value = tpl; o.textContent = tpl;
          selTpl.append(o);
        });
      }
    };

    selTpl.onchange = ()=>{
      form.innerHTML = '';
      imasks.forEach(m=>m.destroy());
      imasks = [];
      const campos = config[selCat.value][selTpl.value] || [];
      if(campos[0] && campos[0].type === 'static'){
        form.innerHTML = lojasHTML;
        btnArea.style.display = 'none';
        return;
      }
      campos.forEach(c=>{
        const wrap = document.createElement("div");
        wrap.className = 'field';
        const lb = document.createElement("label");
        lb.htmlFor = c.id; lb.textContent = c.label;
        wrap.append(lb);
        let inp;
        if(c.type === 'textarea'){
          inp = document.createElement("textarea");
          inp.rows = 3;
          if(c.default) inp.value = c.default;
        } else if(c.type === 'radio'){
          c.options.forEach(opt=>{
            const rb = document.createElement("input");
            rb.type = 'radio'; rb.name = c.id; rb.value = opt; rb.id = c.id + opt;
            const lbl = document.createElement("label");
            lbl.htmlFor = rb.id; lbl.textContent = opt;
            wrap.append(rb, lbl);
          });
        } else {
          inp = document.createElement("input");
          inp.type = 'text';
          if(c.default) inp.value = c.default;
        }
        if(inp){
          inp.id = c.id;
          wrap.append(inp);
          if(c.mask) imasks.push(IMask(inp,{mask:c.mask,lazy:c.lazy!==false}));
        }
        form.append(wrap);
      });
      btnArea.style.display = 'block';
      btnCopy.disabled = btnClear.disabled = false;
    };

    btnCopy.onclick = ()=>{
      const vals = (config[selCat.value][selTpl.value]||[]).map(c=>{
        if(c.type==='radio'){
          const s = document.querySelector(`input[name="${c.id}"]:checked`);
          return s? s.value : '';
        }
        const e = document.getElementById(c.id);
        return e? e.value.trim() : '';
      }).join('\t');
      navigator.clipboard.writeText(vals).then(()=>{
        const t = document.getElementById("toast");
        t.style.display = 'block';
        t.style.opacity = 1;
        setTimeout(()=>{
          t.style.opacity = 0;
          setTimeout(()=>t.style.display='none',500);
        },1500);
      });
    };
    btnClear.onclick = ()=> selTpl.onchange();
  </script>
</body>
</html>
